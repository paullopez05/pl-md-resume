{"ast":null,"code":"/**\n * @typedef {import('../types.js').Node} Node\n * @typedef {import('../types.js').Parent} Parent\n * @typedef {import('../types.js').Join} Join\n * @typedef {import('../types.js').Context} Context\n * @typedef {import('../types.js').TrackFields} TrackFields\n */\nimport { track } from './track.js';\n/**\n * @param {Parent} parent\n * @param {Context} context\n * @param {TrackFields} safeOptions\n * @returns {string}\n */\n\nexport function containerFlow(parent, context, safeOptions) {\n  const indexStack = context.indexStack;\n  const children = parent.children || [];\n  const tracker = track(safeOptions);\n  /** @type {Array<string>} */\n\n  const results = [];\n  let index = -1;\n  indexStack.push(-1);\n\n  while (++index < children.length) {\n    const child = children[index];\n    indexStack[indexStack.length - 1] = index;\n    results.push(tracker.move(context.handle(child, parent, context, {\n      before: '\\n',\n      after: '\\n',\n      ...tracker.current()\n    })));\n\n    if (child.type !== 'list') {\n      context.bulletLastUsed = undefined;\n    }\n\n    if (index < children.length - 1) {\n      results.push(tracker.move(between(child, children[index + 1])));\n    }\n  }\n\n  indexStack.pop();\n  return results.join('');\n  /**\n   * @param {Node} left\n   * @param {Node} right\n   * @returns {string}\n   */\n\n  function between(left, right) {\n    let index = context.join.length;\n\n    while (index--) {\n      const result = context.join[index](left, right, parent, context);\n\n      if (result === true || result === 1) {\n        break;\n      }\n\n      if (typeof result === 'number') {\n        return '\\n'.repeat(1 + result);\n      }\n\n      if (result === false) {\n        return '\\n\\n<!---->\\n\\n';\n      }\n    }\n\n    return '\\n\\n';\n  }\n}","map":{"version":3,"sources":["/home/mash/Documents/Code/JavaScript/pl-md-resume/node_modules/mdast-util-to-markdown/lib/util/container-flow.js"],"names":["track","containerFlow","parent","context","safeOptions","indexStack","children","tracker","results","index","push","length","child","move","handle","before","after","current","type","bulletLastUsed","undefined","between","pop","join","left","right","result","repeat"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAAQA,KAAR,QAAoB,YAApB;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,aAAT,CAAuBC,MAAvB,EAA+BC,OAA/B,EAAwCC,WAAxC,EAAqD;AAC1D,QAAMC,UAAU,GAAGF,OAAO,CAACE,UAA3B;AACA,QAAMC,QAAQ,GAAGJ,MAAM,CAACI,QAAP,IAAmB,EAApC;AACA,QAAMC,OAAO,GAAGP,KAAK,CAACI,WAAD,CAArB;AACA;;AACA,QAAMI,OAAO,GAAG,EAAhB;AACA,MAAIC,KAAK,GAAG,CAAC,CAAb;AAEAJ,EAAAA,UAAU,CAACK,IAAX,CAAgB,CAAC,CAAjB;;AAEA,SAAO,EAAED,KAAF,GAAUH,QAAQ,CAACK,MAA1B,EAAkC;AAChC,UAAMC,KAAK,GAAGN,QAAQ,CAACG,KAAD,CAAtB;AAEAJ,IAAAA,UAAU,CAACA,UAAU,CAACM,MAAX,GAAoB,CAArB,CAAV,GAAoCF,KAApC;AAEAD,IAAAA,OAAO,CAACE,IAAR,CACEH,OAAO,CAACM,IAAR,CACEV,OAAO,CAACW,MAAR,CAAeF,KAAf,EAAsBV,MAAtB,EAA8BC,OAA9B,EAAuC;AACrCY,MAAAA,MAAM,EAAE,IAD6B;AAErCC,MAAAA,KAAK,EAAE,IAF8B;AAGrC,SAAGT,OAAO,CAACU,OAAR;AAHkC,KAAvC,CADF,CADF;;AAUA,QAAIL,KAAK,CAACM,IAAN,KAAe,MAAnB,EAA2B;AACzBf,MAAAA,OAAO,CAACgB,cAAR,GAAyBC,SAAzB;AACD;;AAED,QAAIX,KAAK,GAAGH,QAAQ,CAACK,MAAT,GAAkB,CAA9B,EAAiC;AAC/BH,MAAAA,OAAO,CAACE,IAAR,CAAaH,OAAO,CAACM,IAAR,CAAaQ,OAAO,CAACT,KAAD,EAAQN,QAAQ,CAACG,KAAK,GAAG,CAAT,CAAhB,CAApB,CAAb;AACD;AACF;;AAEDJ,EAAAA,UAAU,CAACiB,GAAX;AAEA,SAAOd,OAAO,CAACe,IAAR,CAAa,EAAb,CAAP;AAEA;AACF;AACA;AACA;AACA;;AACE,WAASF,OAAT,CAAiBG,IAAjB,EAAuBC,KAAvB,EAA8B;AAC5B,QAAIhB,KAAK,GAAGN,OAAO,CAACoB,IAAR,CAAaZ,MAAzB;;AAEA,WAAOF,KAAK,EAAZ,EAAgB;AACd,YAAMiB,MAAM,GAAGvB,OAAO,CAACoB,IAAR,CAAad,KAAb,EAAoBe,IAApB,EAA0BC,KAA1B,EAAiCvB,MAAjC,EAAyCC,OAAzC,CAAf;;AAEA,UAAIuB,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,CAAlC,EAAqC;AACnC;AACD;;AAED,UAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,eAAO,KAAKC,MAAL,CAAY,IAAID,MAAhB,CAAP;AACD;;AAED,UAAIA,MAAM,KAAK,KAAf,EAAsB;AACpB,eAAO,iBAAP;AACD;AACF;;AAED,WAAO,MAAP;AACD;AACF","sourcesContent":["/**\n * @typedef {import('../types.js').Node} Node\n * @typedef {import('../types.js').Parent} Parent\n * @typedef {import('../types.js').Join} Join\n * @typedef {import('../types.js').Context} Context\n * @typedef {import('../types.js').TrackFields} TrackFields\n */\n\nimport {track} from './track.js'\n\n/**\n * @param {Parent} parent\n * @param {Context} context\n * @param {TrackFields} safeOptions\n * @returns {string}\n */\nexport function containerFlow(parent, context, safeOptions) {\n  const indexStack = context.indexStack\n  const children = parent.children || []\n  const tracker = track(safeOptions)\n  /** @type {Array<string>} */\n  const results = []\n  let index = -1\n\n  indexStack.push(-1)\n\n  while (++index < children.length) {\n    const child = children[index]\n\n    indexStack[indexStack.length - 1] = index\n\n    results.push(\n      tracker.move(\n        context.handle(child, parent, context, {\n          before: '\\n',\n          after: '\\n',\n          ...tracker.current()\n        })\n      )\n    )\n\n    if (child.type !== 'list') {\n      context.bulletLastUsed = undefined\n    }\n\n    if (index < children.length - 1) {\n      results.push(tracker.move(between(child, children[index + 1])))\n    }\n  }\n\n  indexStack.pop()\n\n  return results.join('')\n\n  /**\n   * @param {Node} left\n   * @param {Node} right\n   * @returns {string}\n   */\n  function between(left, right) {\n    let index = context.join.length\n\n    while (index--) {\n      const result = context.join[index](left, right, parent, context)\n\n      if (result === true || result === 1) {\n        break\n      }\n\n      if (typeof result === 'number') {\n        return '\\n'.repeat(1 + result)\n      }\n\n      if (result === false) {\n        return '\\n\\n<!---->\\n\\n'\n      }\n    }\n\n    return '\\n\\n'\n  }\n}\n"]},"metadata":{},"sourceType":"module"}